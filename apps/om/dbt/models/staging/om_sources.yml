version: 2

sources:
  - name: raw
    schema: raw
    tables:
      - name: om_weather
        description: >
          Hourly weather data from the Open-Meteo API.
          Includes historical archive and forecast data.
          Both sources provide the same 4 natural weather variables.
        columns:
          - name: datetime
            description: "Hourly timestamp (Europe/Rome timezone)"
            tests:
              - not_null
              - unique
          - name: shortwave_radiation
            description: "Total solar radiation - GHI (W/m2)"
          - name: cloud_cover
            description: "Total cloud cover (%)"
          - name: temperature_2m
            description: "Air temperature at 2m (C)"
          - name: precipitation
            description: "Total precipitation (mm)"

      - name: om_weather_features
        description: >
          Gold-layer ML features computed by the Python feature pipeline
          from silver weather data. Contains 29 features for energy
          consumption forecasting, identical for historical and forecast data.
        columns:
          - name: datetime
            description: "Hourly timestamp (Europe/Rome timezone)"
            tests:
              - not_null
              - unique
